<html>
<script type="text/javascript" src = "https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
<script type="text/javascript" src = "https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

<div class="list" ng-controller="NewPosterController">

  <a class="button icon-left super-chevron-left button-clear button-dark" onclick="window.location.href='settings.html'">Cancel</a>

  <i class = "icon super-ios7-folder-outline" style="font-size: 50px; margin-left: 240px"></i>

  <label class="item item-input item-floating-label">
    <span class="input-label">Study Name</span>
    <form name="formStudyName">
    <input type="text" name="studyName" placeholder="Study Name">
    </form>
  </label>

  <label class="item item-input item-floating-label">
    <span class="input-label">Location</span>
    <form name="formLocation">
    <input type="text" name="location" placeholder="Location">
    </form>
  </label>

  <label class="item item-input item-floating-label">
    <span class="input-label">Duration</span>
    <form name="formDuration">
    <input type="text" name="duration" placeholder="Duration">
    </form>
  </label>

  <label class="item item-input item-floating-label">
    <span class="input-label">Compensation</span>
    <form name="formCompensation">
    <input type="text" name="compensation" placeholder="Compensation">
    </form>
  </label>

  <label class="item item-input item-floating-label">
    <span class="input-label">StartTime</span>
    <form name="formStartTime">
    <input type="text" name="startTime" placeholder="startTime">
    </form>
  </label>

  <label class="item item-input item-floating-label">
    <span class="input-label">EndTime</span>
    <form name="formEndTime">
    <input type="text" name="endTime" placeholder="endTime">
    </form>
  </label>

  <label class="item item-input item-floating-label">
    <span class="input-label">Email</span>
    <form name="formEmail">
    <input type="text" name="email" placeholder="Email">
    </form>
  </label>

<!--
/*To be implemented:
* time-selection
*/
-->




  <div>
    <button class="button button-block button-positive" onclick="addData( )">
      Confirm
    </button>
  </div>


</div>


  <div id = "events"></div>


  <script type = "foo/bar" id = "eventTemplate">
  </script>

  <script type="text/javascript">

  function addData( ){
    Parse.initialize("susDpNWLgi3QqeprNxBKeQ7uIJK0srYlde52neVb", "OMWpK5Oa17fiNcDyTkqvbKz2HHL6szH4jPYXlhz0");
     var template = $("#eventTemplate").html();
     us_template = _.template(template);
     var createEvent = function(a) {
         $("#events").append(us_template(a));
      }
     //var TestObject = Parse.Object.extend("TestObject");
     var TestObject = Parse.Object.extend("event");
     var testObject = new TestObject();

     //Get value from form
     var studyName = document.forms["formStudyName"]["studyName"].value;
     var location = document.forms["formLocation"]["location"].value;
     var duration = document.forms["formDuration"]["duration"].value;
     var compensation = document.forms["formCompensation"]["compensation"].value;
     var startTime = document.forms["formStartTime"]["startTime"].value;
     var endTime = document.forms["formEndTime"]["endTime"].value;
     var email = document.forms["formEmail"]["email"].value;


     //Add data into parse
     testObject.save({study: studyName}).then(function(object) {
     });
     testObject.save({location: location}).then(function(object) {
     });
     testObject.save({duration: duration}).then(function(object) {
     });
     testObject.save({compensation: compensation}).then(function(object) {
     });
     testObject.save({startdate_str: startTime}).then(function(object) {
     });
     testObject.save({enddate_str: endTime}).then(function(object) {
     });
     testObject.save({email: email}).then(function(object) {
     });
     testObject.save({likeNum: 0}).then(function(object) {
     });
     testObject.save({dislikeNum: 0}).then(function(object) {
     });
     location.reload();








     var EventObject = Parse.Object.extend("event");
     var query = new Parse.Query(EventObject);
     //query.include('lab');

     query.find({
        success: function(results) {

         for (var i = 0; i<results.length; i++)  //The length of data should be mutable
         {

           var object = results[i].attributes;
           object.iconURL = object.lab.attributes.Icon._url;
           createEvent(object);
         }
         //document.write("success");
       // The object was retrieved successfully.
       document.getElementById("1").innerHTML = "success";
     },
       error: function(object, error) {

         //document.write("failure");
       // The object was not retrieved successfully.
       // error is a Parse.Error with an error code and message.
        document.getElementById("1").innerHTML = "error";
     }
    });


//To be implemented: Click the confirm in new form page, go to the setting page




}
   </script>

<!--
<script type="text/javascript">

function addNewdata(testForForm)
{
  Parse.initialize("susDpNWLgi3QqeprNxBKeQ7uIJK0srYlde52neVb", "OMWpK5Oa17fiNcDyTkqvbKz2HHL6szH4jPYXlhz0");
   var template = $("#eventTemplate").html();
   us_template = _.template(template);
   var createEvent = function(a) {
       $("#events").append(us_template(a));
    }
   var TestObject = Parse.Object.extend("TestObject");
   var testObject = new TestObject();
   testObject.save({foo: "testForForm"}).then(function(object) {
   });

}
</script>
-->



</html>
