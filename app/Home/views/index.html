<html>
<script type="text/javascript" src = "https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
<script type="text/javascript" src = "https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

  <div ng-controller="IndexController">

    <div class="list">
    <label class="item item-input item-select">
        <img src="/imags/NUwildcats.png" width="50px"; height="40px">
        <div style="margin-left:20px; color:#9933ff; font-weight:bold; font-size:120%">
          NU Bulletin Board
        </div>
      <select>
        <option>Research</option>
        <option selected>Music</option>
      </select>
    </label>
  </div>
  </div>

    <div id = "events"></div>

  <script type = "foo/bar" id = "eventTemplate">

    <div class="list" ng-controller="IndexController">

        <a class="item item-thumbnail-left" href="#">
          <img src = "<%=iconURL%>"  ></img>
          <h2><%=study%></h2>
          <p><%="$" + compensation%>, <%=duration%></p>
          <p><%=location%></p>
          <p><%="Start date: " +startdate_str%></p>
          <p><%="End date: " + enddate_str%></p>
          <p><%=email%></p>
          <p>  <i class = "icon super-email" style="font-size: 25px; float: right; padding: 10px" onclick="sendEmail()" ></i></p>
        </a>

    </div>

  </script>


  <script type="text/javascript">
    Parse.initialize("susDpNWLgi3QqeprNxBKeQ7uIJK0srYlde52neVb", "OMWpK5Oa17fiNcDyTkqvbKz2HHL6szH4jPYXlhz0");
     var template = $("#eventTemplate").html();
     us_template = _.template(template);
     var createEvent = function(a) {
         $("#events").append(us_template(a));
      }
     var TestObject = Parse.Object.extend("TestObject");
     var testObject = new TestObject();
     testObject.save({foo: "Frank124"}).then(function(object) {
     });

     var EventObject = Parse.Object.extend("event");
     var query = new Parse.Query(EventObject);
     
     query.include('lab');

     query.find({
        success: function(results) {

         for (var i = 0; i<results.length; i++)  //The length of data should be mutable
         {

           var object = results[i].attributes;
           object.iconURL = object.lab.attributes.Icon._url;
           createEvent(object);
         }

       document.getElementById("1").innerHTML = "success";
     },
       error: function(object, error) {

        document.getElementById("1").innerHTML = "error";
     }
    });

   </script>


   <script >
   function sendEmail()
   {
     var EMAIL_ADDRESS = "";
     window.open("mailto:" + EMAIL_ADDRESS);
   }
   </script>




<style>
    .container
    {
        width:100%;
    }
    #M-button
    {
        width:50%;
        display: inline !important;
    }
    #R-button
    {
        width:50%;
        display: inline !important;
    }
</style>
</html>

<!--
<script src="/app/Home/scripts/IndexController.js" type="text/javascript"></script>
-->
